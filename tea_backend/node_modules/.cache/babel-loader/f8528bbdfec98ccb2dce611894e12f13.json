{"remainingRequest":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\thread-loader\\dist\\cjs.js!D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\babel-loader\\lib\\index.js!D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\food\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\food\\list.vue","mtime":1670919248217},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1667713504236},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667713515975},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667713514172}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\\\u5C1A\\u7845\\u8C37\\\\uniapp_storage\\\\tea_backend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getDishPage } from \"../../api/food.js\";\nimport { deleteDish } from \"../../api/food.js\";\nimport { editDish } from \"../../api/food.js\";\nimport { addDish } from \"../../api/food.js\";\nimport { queryDishById } from \"../../api/food.js\";\nimport { getCategoryList } from \"../../api/food.js\";\nimport { queryDishList } from \"../../api/food.js\";\nimport { commonDownload } from \"../../api/food.js\";\nimport { dishStatusByStatus } from \"../../api/food.js\";\nexport default {\n  name: 'flist',\n  el: '#food-app',\n  data: function data() {\n    return {\n      input: '',\n      counts: 0,\n      page: 1,\n      pageSize: 10,\n      tableData: [],\n      dishState: '',\n      checkList: []\n    };\n  },\n  computed: {},\n  created: function created() {\n    this.init();\n  },\n  mounted: function mounted() {},\n  methods: {\n    init: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        var params;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                params = {\n                  page: this.page,\n                  pageSize: this.pageSize,\n                  name: this.input ? this.input : undefined\n                };\n                _context.next = 3;\n                return getDishPage(params).then(function (res) {\n                  if (String(res.data.code) === '1') {\n                    _this.tableData = res.data.data.records || [];\n                    _this.counts = res.data.data.total;\n                  }\n                }).catch(function (err) {\n                  _this.$message.error('请求出错了：' + err);\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    getImage: function getImage(image) {\n      return \"/api/common/download?name=\".concat(image);\n    },\n    handleQuery: function handleQuery() {\n      this.page = 1;\n      this.init();\n    },\n    // 添加\n    addFoodtype: function addFoodtype(st) {\n      if (st === 'add') {\n        this.$router.push('/food/add');\n      } else {\n        this.$router.push({\n          path: '/food/add',\n          name: 'fadd',\n          params: {\n            id: st\n          }\n        });\n      }\n    },\n    // 删除\n    deleteHandle: function deleteHandle(type, id) {\n      var _this2 = this;\n\n      if (type === '批量' && id === null) {\n        if (this.checkList.length === 0) {\n          return this.$message.error('请选择删除对象');\n        }\n      }\n\n      this.$confirm('确认删除该菜品, 是否继续?', '确定删除', {\n        'confirmButtonText': '确定',\n        'cancelButtonText': '取消'\n      }).then(function () {\n        deleteDish(type === '批量' ? _this2.checkList.join(',') : id).then(function (res) {\n          if (res.data.code === 1) {\n            _this2.$message.success('删除成功！');\n\n            _this2.handleQuery();\n          } else {\n            _this2.$message.error(res.data.msg || '操作失败');\n          }\n        }).catch(function (err) {\n          _this2.$message.error('请求出错了：' + err);\n        });\n      });\n    },\n    //状态更改\n    statusHandle: function statusHandle(row) {\n      var _this3 = this;\n\n      var params = {};\n\n      if (typeof row === 'string') {\n        if (this.checkList.length === 0) {\n          this.$message.error('批量操作，请先勾选操作菜品！');\n          return false;\n        }\n\n        params.id = this.checkList.join(',');\n        params.status = row;\n      } else {\n        params.id = row.id;\n        params.status = row.status ? '0' : '1';\n      }\n\n      this.dishState = params;\n      this.$confirm('确认更改该菜品状态?', '提示', {\n        'confirmButtonText': '确定',\n        'cancelButtonText': '取消',\n        'type': 'warning'\n      }).then(function () {\n        // 起售停售---批量起售停售接口\n        dishStatusByStatus(_this3.dishState).then(function (res) {\n          if (res.data.code === 1) {\n            _this3.$message.success('菜品状态已经更改成功！');\n\n            _this3.handleQuery();\n          } else {\n            _this3.$message.error(res.data.msg || '操作失败');\n          }\n        }).catch(function (err) {\n          _this3.$message.error('请求出错了：' + err);\n        });\n      });\n    },\n    // 全部操作\n    handleSelectionChange: function handleSelectionChange(val) {\n      var checkArr = [];\n      val.forEach(function (n) {\n        checkArr.push(n.id);\n      });\n      this.checkList = checkArr;\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.init();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      this.page = val;\n      this.init();\n    }\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"dashboard-container\" id=\"food-app\">\r\n\t\t<div class=\"container\" style=\"height:600px; overflow:auto\">\r\n\t\t\t<div class=\"tableBar\">\r\n\t\t\t\t<el-input v-model=\"input\" placeholder=\"请输入菜品名称\" style=\"width: 250px\" clearable\r\n\t\t\t\t\t@keyup.enter.native=\"handleQuery\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-search\" style=\"cursor: pointer\" @click=\"init\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t\t<div class=\"tableLab\">\r\n\t\t\t\t\t<span class=\"span-btn delBut non\" @click=\"deleteHandle('批量', null)\">批量删除</span>\r\n\t\t\t\t\t<span class=\"span-btn blueBug non\" @click=\"statusHandle('1')\">批量启售</span>\r\n\t\t\t\t\t<span style=\"border:none;\" class=\"span-btn delBut non\" @click=\"statusHandle('0')\">批量停售</span>\r\n\t\t\t\t\t<el-button type=\"primary\" @click=\"addFoodtype('add')\">\r\n\t\t\t\t\t\t+ 新建菜品\r\n\t\t\t\t\t</el-button>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" stripe class=\"tableBox\" @selection-change=\"handleSelectionChange\">\r\n\t\t\t\t<el-table-column type=\"selection\" width=\"25\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"name\" label=\"菜品名称\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"image\" label=\"图片\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"{ row }\">\r\n\t\t\t\t\t\t<el-image style=\"width: auto; height: 40px; border:none;cursor: pointer;\"\r\n\t\t\t\t\t\t\t:src=\"getImage(row.image)\" :preview-src-list=\"[ `/common/download?name=${row.image}` ]\">\r\n\t\t\t\t\t\t\t<div slot=\"error\" class=\"image-slot\">\r\n\t\t\t\t\t\t\t\t<img src=\"../../assets/noImg.png\" style=\"width: auto; height: 40px; border:none;\">\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</el-image>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"categoryName\" label=\"菜品分类\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"售价\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span style=\"margin-right: 10px;\">￥{{ scope.row.price }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"售卖状态\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span style=\"margin-right: 10px;\">{{ scope.row.status == '0' ? '停售' : '启售' }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"updateTime\" label=\"最后操作时间\">\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"addFoodtype(scope.row.id)\">\r\n\t\t\t\t\t\t\t修改\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"statusHandle(scope.row)\">\r\n\t\t\t\t\t\t\t{{ scope.row.status == '0' ? '启售' : '停售' }}\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"delBut non\"\r\n\t\t\t\t\t\t\t@click=\"deleteHandle('单删', scope.row.id)\">\r\n\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination class=\"pageList\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\"\r\n\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" @size-change=\"handleSizeChange\"\r\n\t\t\t\t:current-page.sync=\"page\" @current-change=\"handleCurrentChange\"></el-pagination>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetDishPage\r\n\t} from '../../api/food.js'\r\n\r\n\timport {\r\n\t\tdeleteDish\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\teditDish\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\taddDish\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\tqueryDishById\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\tgetCategoryList\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\tqueryDishList\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\tcommonDownload\r\n\t} from '../../api/food.js'\r\n\timport {\r\n\t\tdishStatusByStatus\r\n\t} from '../../api/food.js'\r\n\r\n\texport default {\r\n\t\tname: 'flist',\r\n\t\tel: '#food-app',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinput: '',\r\n\t\t\t\tcounts: 0,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tdishState: '',\r\n\t\t\t\tcheckList: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {},\r\n\t\tcreated() {\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\t\tname: this.input ? this.input : undefined\r\n\t\t\t\t}\r\n\t\t\t\tawait getDishPage(params).then(res => {\r\n\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\t\t\t\t\t\tthis.tableData = res.data.data.records || []\r\n\t\t\t\t\t\tthis.counts = res.data.data.total\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetImage(image) {\r\n\t\t\t\treturn `/api/common/download?name=${image}`\r\n\t\t\t},\r\n\t\t\thandleQuery() {\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t\tthis.init();\r\n\t\t\t},\r\n\t\t\t// 添加\r\n\t\t\taddFoodtype(st) {\r\n\t\t\t\tif (st === 'add') {\r\n\t\t\t\t\tthis.$router.push('/food/add')\r\n\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tpath: '/food/add',\r\n\t\t\t\t\t\tname: 'fadd',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tid: st\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t// 删除\r\n\t\t\tdeleteHandle(type, id) {\r\n\t\t\t\tif (type === '批量' && id === null) {\r\n\t\t\t\t\tif (this.checkList.length === 0) {\r\n\t\t\t\t\t\treturn this.$message.error('请选择删除对象')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$confirm('确认删除该菜品, 是否继续?', '确定删除', {\r\n\t\t\t\t\t'confirmButtonText': '确定',\r\n\t\t\t\t\t'cancelButtonText': '取消',\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tdeleteDish(type === '批量' ? this.checkList.join(',') : id).then(res => {\r\n\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\tthis.$message.success('删除成功！')\r\n\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.msg || '操作失败')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//状态更改\r\n\t\t\tstatusHandle(row) {\r\n\t\t\t\tlet params = {}\r\n\t\t\t\tif (typeof row === 'string') {\r\n\t\t\t\t\tif (this.checkList.length === 0) {\r\n\t\t\t\t\t\tthis.$message.error('批量操作，请先勾选操作菜品！')\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparams.id = this.checkList.join(',')\r\n\t\t\t\t\tparams.status = row\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparams.id = row.id\r\n\t\t\t\t\tparams.status = row.status ? '0' : '1'\r\n\t\t\t\t}\r\n\t\t\t\tthis.dishState = params\r\n\t\t\t\tthis.$confirm('确认更改该菜品状态?', '提示', {\r\n\t\t\t\t\t'confirmButtonText': '确定',\r\n\t\t\t\t\t'cancelButtonText': '取消',\r\n\t\t\t\t\t'type': 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\t// 起售停售---批量起售停售接口\r\n\t\t\t\t\tdishStatusByStatus(this.dishState).then(res => {\r\n\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\tthis.$message.success('菜品状态已经更改成功！')\r\n\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.msg || '操作失败')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t// 全部操作\r\n\t\t\thandleSelectionChange(val) {\r\n\t\t\t\tlet checkArr = []\r\n\t\t\t\tval.forEach((n) => {\r\n\t\t\t\t\tcheckArr.push(n.id)\r\n\t\t\t\t})\r\n\t\t\t\tthis.checkList = checkArr\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t\tthis.pageSize = val\r\n\t\t\t\tthis.init()\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.page = val\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n</style>\n"],"sourceRoot":"src/components/food"}]}