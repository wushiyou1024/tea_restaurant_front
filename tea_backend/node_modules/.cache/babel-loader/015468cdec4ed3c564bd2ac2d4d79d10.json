{"remainingRequest":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\thread-loader\\dist\\cjs.js!D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\babel-loader\\lib\\index.js!D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\category\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\category\\list.vue","mtime":1669685044525},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1667713504236},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667713515975},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667713514172}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"D:\\\\\\u5C1A\\u7845\\u8C37\\\\uniapp_storage\\\\tea_backend\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addCategory } from \"../../api/category.js\";\nimport { editCategory } from \"../../api/category.js\";\nimport { deleCategory } from \"../../api/category.js\";\nimport { queryCategoryById } from \"../../api/category.js\";\nimport { getCategoryPage } from \"../../api/category.js\";\nexport default {\n  name: 'clist',\n  el: '#category-app',\n  data: function data() {\n    return {\n      action: '',\n      counts: 0,\n      page: 1,\n      pageSize: 5,\n      tableData: [],\n      type: '',\n      classData: {\n        'title': '添加菜品分类',\n        'dialogVisible': false,\n        'categoryId': '',\n        'name': '',\n        sort: ''\n      }\n    };\n  },\n  computed: {},\n  created: function created() {\n    this.init();\n  },\n  mounted: function mounted() {},\n  methods: {\n    init: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return getCategoryPage({\n                  'page': this.page,\n                  'pageSize': this.pageSize\n                }).then(function (res) {\n                  // console.log(res)\n                  if (String(res.data.code) === '1') {\n                    _this.tableData = res.data.data.records;\n                    _this.counts = Number(res.data.data.total);\n                  } else {\n                    _this.$message.error(res.msg || '操作失败');\n                  }\n                }).catch(function (err) {\n                  _this.$message.error('请求出错了：' + err);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }(),\n    handleQuery: function handleQuery() {\n      this.page = 1;\n      this.init();\n    },\n    // 添加\n    addClass: function addClass(st) {\n      if (st == 'class') {\n        this.classData.title = '新增菜品分类';\n        this.type = '1';\n      } else {\n        this.classData.title = '新增套餐分类';\n        this.type = '2';\n      }\n\n      this.action = 'add';\n      this.classData.name = '';\n      this.classData.sort = '';\n      this.classData.dialogVisible = true;\n    },\n    editHandle: function editHandle(dat) {\n      this.classData.title = '修改分类';\n      this.action = 'edit';\n      this.classData.name = dat.name;\n      this.classData.sort = dat.sort;\n      this.classData.id = dat.id;\n      this.classData.dialogVisible = true;\n    },\n    // 关闭弹窗\n    handleClose: function handleClose(st) {\n      this.classData.dialogVisible = false;\n    },\n    //删除\n    deleteHandle: function deleteHandle(id) {\n      var _this2 = this;\n\n      this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\n        'confirmButtonText': '确定',\n        'cancelButtonText': '取消',\n        'type': 'warning'\n      }).then(function () {\n        deleCategory(id).then(function (res) {\n          if (res.data.code === 1) {\n            _this2.$message.success('删除成功！');\n\n            _this2.handleQuery();\n          } else {\n            _this2.$message.error(res.data.msg || '操作失败');\n          }\n        }).catch(function (err) {\n          _this2.$message.error('请求出错了：' + err);\n        });\n      });\n    },\n    //数据提交\n    submitForm: function submitForm(st) {\n      var _this3 = this;\n\n      var classData = this.classData;\n      var valid = (classData.name === 0 || classData.name) && (classData.sort === 0 || classData.sort);\n\n      if (this.action === 'add') {\n        if (valid) {\n          var reg = /^\\d+$/;\n\n          if (reg.test(classData.sort)) {\n            addCategory({\n              'name': classData.name,\n              'type': this.type,\n              sort: classData.sort\n            }).then(function (res) {\n              console.log(res);\n\n              if (res.data.code === 1) {\n                _this3.$message.success('分类添加成功！');\n\n                if (!st) {\n                  _this3.classData.dialogVisible = false;\n                } else {\n                  _this3.classData.name = '';\n                  _this3.classData.sort = '';\n                }\n\n                _this3.handleQuery();\n              } else {\n                _this3.$message.error(res.msg || '操作失败');\n              }\n            }).catch(function (err) {\n              _this3.$message.error('请求出错了：' + err);\n            });\n          } else {\n            this.$message.error('排序只能输入数字类型');\n          }\n        } else {\n          this.$message.error('请输入分类名称或排序');\n        }\n      } else if (valid) {\n        var _reg = /^\\d+$/;\n\n        if (_reg.test(this.classData.sort)) {\n          editCategory({\n            'id': this.classData.id,\n            'name': this.classData.name,\n            sort: this.classData.sort\n          }).then(function (res) {\n            if (res.data.code === 1) {\n              _this3.$message.success('分类修改成功！');\n\n              _this3.classData.dialogVisible = false;\n\n              _this3.handleQuery();\n            } else {\n              _this3.$message.error(res.msg || '操作失败');\n            }\n          }).catch(function (err) {\n            _this3.$message.error('请求出错了：' + err);\n          });\n        } else {\n          this.$message.error('排序只能输入数字类型');\n        }\n      } else {\n        this.$message.error('请输入分类名称或排序');\n      }\n    },\n    handleSizeChange: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.init();\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      console.log(val);\n      this.page = val;\n      this.init();\n    }\n  }\n};",{"version":3,"sources":["list.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div class=\"dashboard-container\" id=\"category-app\">\r\n\t\t<div class=\"container\" style=\"height:600px; overflow:auto\">\r\n\t\t\t<div class=\"tableBar\" style=\"display: inline-block;float: left;\">\r\n\t\t\t\t<el-button type=\"primary\" class=\"continue\" @click=\"addClass('class')\">\r\n\t\t\t\t\t+ 新增菜品分类\r\n\t\t\t\t</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addClass('meal')\">\r\n\t\t\t\t\t+ 新增套餐分类\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" stripe class=\"tableBox\">\r\n\t\t\t\t<el-table-column prop=\"name\" label=\"分类名称\" />\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"type\" label=\"分类类型\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>{{ scope.row.type == '1' ? '菜品分类': '套餐分类' }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"updateTime\" label=\"操作时间\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{scope.row.updateTime}}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"sort\" label=\"排序\" />\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"editHandle(scope.row)\">\r\n\t\t\t\t\t\t\t修改\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"delBut non\" @click=\"deleteHandle(scope.row.id)\">\r\n\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination class=\"pageList\" :page-sizes=\"[5,10, 20, 30, 40]\" :page-size=\"pageSize\"\r\n\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" :current-page.sync=\"page\"\r\n\t\t\t\t@size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"></el-pagination>\r\n\t\t</div>\r\n\t\t<el-dialog :title=\"classData.title\" :visible.sync=\"classData.dialogVisible\" width=\"30%\"\r\n\t\t\t:before-close=\"handleClose\">\r\n\t\t\t<el-form class=\"demo-form-inline\" label-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"分类名称：\">\r\n\t\t\t\t\t<el-input v-model=\"classData.name\" placeholder=\"请输入分类名称\" maxlength=\"14\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"排序：\">\r\n\t\t\t\t\t<el-input v-model=\"classData.sort\" type=\"number\" placeholder=\"请输入排序\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button size=\"medium\" @click=\"classData.dialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"submitForm()\">确 定</el-button>\r\n\t\t\t\t<el-button v-if=\"action != 'edit'\" type=\"primary\" size=\"medium\" class=\"continue\"\r\n\t\t\t\t\t@click=\"submitForm('go')\"> 保存并继续添加 </el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\taddCategory\r\n\t} from '../../api/category.js'\r\n\timport {\r\n\t\teditCategory\r\n\t} from '../../api/category.js'\r\n\timport {\r\n\t\tdeleCategory\r\n\t} from '../../api/category.js'\r\n\r\n\timport {\r\n\t\tqueryCategoryById\r\n\t} from '../../api/category.js'\r\n\timport {\r\n\t\tgetCategoryPage\r\n\t} from '../../api/category.js'\r\n\r\n\texport default {\r\n\t\tname: 'clist',\r\n\t\tel: '#category-app',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taction: '',\r\n\t\t\t\tcounts: 0,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\ttype: '',\r\n\t\t\t\tclassData: {\r\n\t\t\t\t\t'title': '添加菜品分类',\r\n\t\t\t\t\t'dialogVisible': false,\r\n\t\t\t\t\t'categoryId': '',\r\n\t\t\t\t\t'name': '',\r\n\t\t\t\t\tsort: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {},\r\n\t\tcreated() {\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tawait getCategoryPage({\r\n\t\t\t\t\t'page': this.page,\r\n\t\t\t\t\t'pageSize': this.pageSize\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\t\t\t\t\t\tthis.tableData = res.data.data.records\r\n\t\t\t\t\t\tthis.counts = Number(res.data.data.total)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleQuery() {\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t\tthis.init();\r\n\t\t\t},\r\n\t\t\t// 添加\r\n\t\t\taddClass(st) {\r\n\t\t\t\tif (st == 'class') {\r\n\t\t\t\t\tthis.classData.title = '新增菜品分类'\r\n\t\t\t\t\tthis.type = '1'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.classData.title = '新增套餐分类'\r\n\t\t\t\t\tthis.type = '2'\r\n\t\t\t\t}\r\n\t\t\t\tthis.action = 'add'\r\n\t\t\t\tthis.classData.name = ''\r\n\t\t\t\tthis.classData.sort = ''\r\n\t\t\t\tthis.classData.dialogVisible = true\r\n\t\t\t},\r\n\t\t\teditHandle(dat) {\r\n\t\t\t\tthis.classData.title = '修改分类'\r\n\t\t\t\tthis.action = 'edit'\r\n\t\t\t\tthis.classData.name = dat.name\r\n\t\t\t\tthis.classData.sort = dat.sort\r\n\t\t\t\tthis.classData.id = dat.id\r\n\t\t\t\tthis.classData.dialogVisible = true\r\n\t\t\t},\r\n\t\t\t// 关闭弹窗\r\n\t\t\thandleClose(st) {\r\n\t\t\t\tthis.classData.dialogVisible = false\r\n\t\t\t},\r\n\t\t\t//删除\r\n\t\t\tdeleteHandle(id) {\r\n\t\t\t\tthis.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n\t\t\t\t\t'confirmButtonText': '确定',\r\n\t\t\t\t\t'cancelButtonText': '取消',\r\n\t\t\t\t\t'type': 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tdeleCategory(id).then(res => {\r\n\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\tthis.$message.success('删除成功！')\r\n\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.msg || '操作失败')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//数据提交\r\n\t\t\tsubmitForm(st) {\r\n\t\t\t\tconst classData = this.classData\r\n\t\t\t\tconst valid = (classData.name === 0 || classData.name) && (classData.sort === 0 || classData.sort)\r\n\t\t\t\tif (this.action === 'add') {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tconst reg = /^\\d+$/\r\n\t\t\t\t\t\tif (reg.test(classData.sort)) {\r\n\t\t\t\t\t\t\taddCategory({\r\n\t\t\t\t\t\t\t\t'name': classData.name,\r\n\t\t\t\t\t\t\t\t'type': this.type,\r\n\t\t\t\t\t\t\t\tsort: classData.sort\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\t\t\tthis.$message.success('分类添加成功！')\r\n\t\t\t\t\t\t\t\t\tif (!st) {\r\n\t\t\t\t\t\t\t\t\t\tthis.classData.dialogVisible = false\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.classData.name = ''\r\n\t\t\t\t\t\t\t\t\t\tthis.classData.sort = ''\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error('排序只能输入数字类型')\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error('请输入分类名称或排序')\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (valid) {\r\n\t\t\t\t\tconst reg = /^\\d+$/\r\n\t\t\t\t\tif (reg.test(this.classData.sort)) {\r\n\t\t\t\t\t\teditCategory({\r\n\t\t\t\t\t\t\t'id': this.classData.id,\r\n\t\t\t\t\t\t\t'name': this.classData.name,\r\n\t\t\t\t\t\t\tsort: this.classData.sort\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\t\tthis.$message.success('分类修改成功！')\r\n\t\t\t\t\t\t\t\tthis.classData.dialogVisible = false\r\n\t\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error('排序只能输入数字类型')\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error('请输入分类名称或排序')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t\tthis.pageSize = val\r\n\t\t\t\tthis.init()\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tconsole.log(val)\r\n\t\t\t\tthis.page = val\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* \t@import '../../styles/common.css';\r\n\t@import '../../styles/page.css'; */\r\n\t/* @import '../../styles/elmentui/index.css' */\r\n</style>\n"],"sourceRoot":"src/components/category"}]}