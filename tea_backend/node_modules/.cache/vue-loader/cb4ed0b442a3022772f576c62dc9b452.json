{"remainingRequest":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\member\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\member\\index.vue","mtime":1671203837377},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667713515975},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667713514172}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tgetMemberList\n} from '../../api/member.js'\n\nimport {\n\tenableOrDisableEmployee\n} from '../../api/member.js'\n\n\nimport {\n\taddEmployee\n} from '../../api/member.js'\n\nimport {\n\teditEmployee\n} from '../../api/member.js'\n\n\nimport {\n\tqueryEmployeeById\n} from '../../api/member.js'\n\n\nexport default {\n\n\tname: 'mindex',\n\tel: '#member-app',\n\tdata() {\n\t\treturn {\n\t\t\tinput: '',\n\t\t\tcounts: 0,\n\t\t\tpage: 1,\n\t\t\tpageSize: 5,\n\t\t\ttableData: [],\n\t\t\tid: '',\n\t\t\tstatus: '',\n\t\t}\n\t},\n\tcomputed: {},\n\tcreated() {\n\t\tthis.init()\n\t\tthis.user = JSON.parse(localStorage.getItem('userInfo')).data.username\n\t\t// console.log(this.user)\n\t},\n\tmounted() {},\n\tmethods: {\n\t\tasync init() {\n\t\t\tconst params = {\n\t\t\t\tpage: this.page,\n\t\t\t\tpageSize: this.pageSize,\n\t\t\t\tname: this.input ? this.input : undefined\n\t\t\t}\n\t\t\tawait getMemberList(params).then(res => {\n\t\t\t\t// console.log(res.data)\n\t\t\t\tif (String(res.data.code) === '1') {\n\n\t\t\t\t\tthis.tableData = res.data.data.records || []\n\t\t\t\t\tthis.counts = res.data.data.total\n\t\t\t\t}\n\t\t\t}).catch(err => {\n\t\t\t\t// console.log(111)\n\t\t\t\tthis.$message.error('请求出错了：' + err)\n\t\t\t})\n\t\t},\n\t\thandleQuery() {\n\t\t\tthis.page = 1;\n\t\t\tthis.init();\n\t\t},\n\t\t// 添加\n\t\taddMemberHandle(st) {\n\t\t\tif (st === 'add') {\n\t\t\t\t//进行路由\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tpath: '/member/add'\n\t\t\t\t})\n\n\t\t\t} else {\n\n\t\t\t\tthis.$router.push({\n\t\t\t\t\tpath: '/member/add',\n\t\t\t\t\tname: 'madd',\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tid: st\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\t//状态修改\n\t\tstatusHandle(row) {\n\t\t\tthis.id = row.id\n\t\t\tthis.status = row.status\n\t\t\tthis.$confirm('确认调整该账号的状态?', '提示', {\n\t\t\t\t'confirmButtonText': '确定',\n\t\t\t\t'cancelButtonText': '取消',\n\t\t\t\t'type': 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tenableOrDisableEmployee({\n\t\t\t\t\t'id': this.id,\n\t\t\t\t\t'status': !this.status ? 1 : 0\n\t\t\t\t}).then(res => {\n\t\t\t\t\t// console.log('enableOrDisableEmployee', res)\n\t\t\t\t\tif (String(res.data.code) === '1') {\n\t\t\t\t\t\tthis.$message.success('账号状态更改成功！')\n\t\t\t\t\t\tthis.handleQuery()\n\t\t\t\t\t}\n\t\t\t\t}).catch(err => {\n\t\t\t\t\tthis.$message.error('请求出错了：' + err)\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\thandleSizeChange(val) {\n\t\t\tthis.pageSize = val\n\t\t\tthis.init()\n\t\t},\n\t\thandleCurrentChange(val) {\n\t\t\tthis.page = val\n\t\t\tthis.init()\n\t\t}\n\t}\n}\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/member","sourcesContent":["<template>\r\n\t<div class=\"dashboard-container\" id=\"member-app\">\r\n\t\t<div class=\"container\" style=\"height:600px; overflow:auto\">\r\n\t\t\t<div class=\"tableBar\">\r\n\t\t\t\t<el-input v-model=\"input\" placeholder=\"请输入员工姓名\" style=\"width: 250px\" clearable\r\n\t\t\t\t\t@keyup.enter.native=\"handleQuery\">\r\n\t\t\t\t\t<i slot=\"prefix\" class=\"el-input__icon el-icon-search\" style=\"cursor: pointer\"\r\n\t\t\t\t\t\t@click=\"handleQuery\"></i>\r\n\t\t\t\t</el-input>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addMemberHandle('add')\">\r\n\t\t\t\t\t+ 添加员工\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" stripe class=\"tableBox\">\r\n\t\t\t\t<el-table-column prop=\"name\" label=\"员工姓名\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"username\" label=\"账号\"></el-table-column>\r\n\t\t\t\t<el-table-column prop=\"phone\" label=\"手机号\"></el-table-column>\r\n\t\t\t\t<el-table-column label=\"账号状态\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{ String(scope.row.status) === '0' ? '已禁用' : '正常' }}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"addMemberHandle(scope.row.id)\"\r\n\t\t\t\t\t\t\t:class=\"{notAdmin:user !== 'admin'}\">\r\n\t\t\t\t\t\t\t编辑\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"delBut non\" @click=\"statusHandle(scope.row)\"\r\n\t\t\t\t\t\t\tv-if=\"user === 'admin'\">\r\n\t\t\t\t\t\t\t{{ scope.row.status == '1' ? '禁用' : '启用' }}\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination class=\"pageList\" :page-sizes=\"[5,10, 20, 30, 40]\" :page-size=\"pageSize\"\r\n\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" :current-page.sync=\"page\"\r\n\t\t\t\t@size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"></el-pagination>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tgetMemberList\r\n\t} from '../../api/member.js'\r\n\r\n\timport {\r\n\t\tenableOrDisableEmployee\r\n\t} from '../../api/member.js'\r\n\r\n\r\n\timport {\r\n\t\taddEmployee\r\n\t} from '../../api/member.js'\r\n\r\n\timport {\r\n\t\teditEmployee\r\n\t} from '../../api/member.js'\r\n\r\n\r\n\timport {\r\n\t\tqueryEmployeeById\r\n\t} from '../../api/member.js'\r\n\r\n\r\n\texport default {\r\n\r\n\t\tname: 'mindex',\r\n\t\tel: '#member-app',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinput: '',\r\n\t\t\t\tcounts: 0,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tid: '',\r\n\t\t\t\tstatus: '',\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {},\r\n\t\tcreated() {\r\n\t\t\tthis.init()\r\n\t\t\tthis.user = JSON.parse(localStorage.getItem('userInfo')).data.username\r\n\t\t\t// console.log(this.user)\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tconst params = {\r\n\t\t\t\t\tpage: this.page,\r\n\t\t\t\t\tpageSize: this.pageSize,\r\n\t\t\t\t\tname: this.input ? this.input : undefined\r\n\t\t\t\t}\r\n\t\t\t\tawait getMemberList(params).then(res => {\r\n\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\r\n\t\t\t\t\t\tthis.tableData = res.data.data.records || []\r\n\t\t\t\t\t\tthis.counts = res.data.data.total\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t// console.log(111)\r\n\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleQuery() {\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t\tthis.init();\r\n\t\t\t},\r\n\t\t\t// 添加\r\n\t\t\taddMemberHandle(st) {\r\n\t\t\t\tif (st === 'add') {\r\n\t\t\t\t\t//进行路由\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tpath: '/member/add'\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\tpath: '/member/add',\r\n\t\t\t\t\t\tname: 'madd',\r\n\t\t\t\t\t\tparams: {\r\n\t\t\t\t\t\t\tid: st\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//状态修改\r\n\t\t\tstatusHandle(row) {\r\n\t\t\t\tthis.id = row.id\r\n\t\t\t\tthis.status = row.status\r\n\t\t\t\tthis.$confirm('确认调整该账号的状态?', '提示', {\r\n\t\t\t\t\t'confirmButtonText': '确定',\r\n\t\t\t\t\t'cancelButtonText': '取消',\r\n\t\t\t\t\t'type': 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tenableOrDisableEmployee({\r\n\t\t\t\t\t\t'id': this.id,\r\n\t\t\t\t\t\t'status': !this.status ? 1 : 0\r\n\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t// console.log('enableOrDisableEmployee', res)\r\n\t\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\t\t\t\t\t\t\tthis.$message.success('账号状态更改成功！')\r\n\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t\tthis.pageSize = val\r\n\t\t\t\tthis.init()\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tthis.page = val\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\t@import '../../styles/common.css';\r\n\t@import '../../styles/page.css';\r\n\r\n\t#member-app .notAdmin::after {\r\n\t\tborder: 0 !important;\r\n\r\n\t}\r\n</style>\n"]}]}