{"remainingRequest":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\member\\add.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\member\\add.vue","mtime":1671204266217},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\babel-loader\\lib\\index.js","mtime":1667713515975},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667713514172}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {\n\tqueryEmployeeById\n} from '../../api/member.js'\nimport {\n\tvalidate\n} from '../../api/validate.js'\n\nimport {\n\tcheckUserName\n} from '../../api/validate.js'\n\n\nimport {\n\tcheckName\n} from '../../api/validate.js'\n\n\nimport {\n\tcheckPhone\n} from '../../api/validate.js'\n\n\nimport {\n\tvalidID\n} from '../../api/validate.js'\n\nimport {\n\taddEmployee\n} from '../../api/member.js'\nimport {\n\teditEmployee\n} from '../../api/member.js'\nexport default {\n\tname: 'add',\n\tel: '#member-add-app',\n\tdata() {\n\t\treturn {\n\t\t\tid: '',\n\t\t\tactionType: '',\n\t\t\truleForm: {\n\t\t\t\t'name': '',\n\t\t\t\t'phone': '',\n\t\t\t\t'sex': '男',\n\t\t\t\t'idNumber': '',\n\t\t\t\tusername: ''\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\trules() {\n\t\t\treturn {\n\t\t\t\t//账号\n\t\t\t\tusername: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\t'validator': checkUserName,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\t//姓名\n\t\t\t\tname: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\t'validator': checkName,\n\t\t\t\t\t'trigger': 'blur'\n\t\t\t\t}],\n\t\t\t\t'phone': [{\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'validator': checkPhone,\n\t\t\t\t\t'trigger': 'blur'\n\t\t\t\t}],\n\t\t\t\t'idNumber': [{\n\t\t\t\t\t'required': true,\n\t\t\t\t\t'validator': validID,\n\t\t\t\t\t'trigger': 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t}\n\t},\n\tcreated() {\n\t\tthis.$parent.menuActived='2'\n\t\tthis.id = this.$route.params.id\n\t\tconsole.log(this.id)\n\t\tthis.actionType = this.id ? 'edit' : 'add'\n\t\tthis.$parent.goBackFlag = true;\n\t\tif (this.id) {\n\t\t\tthis.init()\n\t\t}\n\t},\n\tmounted() {},\n\tmethods: {\n\t\tasync init() {\n\n\t\t\t// console.log(this.$parent.goBackFlag)\n\t\t\tqueryEmployeeById(this.id).then(res => {\n\t\t\t\tconsole.log(res)\n\t\t\t\tif (String(res.data.code) === '1') {\n\t\t\t\t\tconsole.log(res.data)\n\t\t\t\t\tthis.ruleForm = res.data.data\n\t\t\t\t\tthis.ruleForm.sex = res.data.data.sex === '0' ? '女' : '男'\n\t\t\t\t\t// this.ruleForm.password = ''\n\t\t\t\t} else {\n\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsubmitForm(formName, st) {\n\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tif (this.actionType === 'add') {\n\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\t...this.ruleForm,\n\t\t\t\t\t\t\tsex: this.ruleForm.sex === '女' ? '0' : '1'\n\t\t\t\t\t\t}\n\t\t\t\t\t\taddEmployee(params).then(res => {\n\t\t\t\t\t\t\tif (res.data.code === 1) {\n\t\t\t\t\t\t\t\tthis.$message.success('员工添加成功！')\n\t\t\t\t\t\t\t\tif (!st) {\n\t\t\t\t\t\t\t\t\tthis.goBack()\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.ruleForm = {\n\t\t\t\t\t\t\t\t\t\tusername: '',\n\t\t\t\t\t\t\t\t\t\t'name': '',\n\t\t\t\t\t\t\t\t\t\t'phone': '',\n\t\t\t\t\t\t\t\t\t\t// 'password': '',\n\t\t\t\t\t\t\t\t\t\t// 'rePassword': '',/\n\t\t\t\t\t\t\t\t\t\t'sex': '男',\n\t\t\t\t\t\t\t\t\t\t'idNumber': ''\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\t...this.ruleForm,\n\t\t\t\t\t\t\tsex: this.ruleForm.sex === '女' ? '0' : '1'\n\t\t\t\t\t\t}\n\t\t\t\t\t\teditEmployee(params).then(res => {\n\t\t\t\t\t\t\tif (res.data.code === 1) {\n\t\t\t\t\t\t\t\tthis.$message.success('员工信息修改成功！')\n\t\t\t\t\t\t\t\tthis.goBack()\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('error submit!!')\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tgoBack() {\n\t\t\tthis.$parent.goBackFlag=false;\n\t\t\tthis.$router.push({\n\t\t\t\tpath: '/member/index'\n\t\t\t})\n\t\t}\n\t}\n}\n",{"version":3,"sources":["add.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"add.vue","sourceRoot":"src/components/member","sourcesContent":["<template>\r\n\t<div class=\"addBrand-container\" id=\"member-add-app\">\r\n\t\t<div class=\"container\">\r\n\t\t\t<el-form ref=\"ruleForm\" :model=\"ruleForm\" :rules=\"rules\" :inline=\"false\" label-width=\"180px\"\r\n\t\t\t\tclass=\"demo-ruleForm\">\r\n\t\t\t\t<el-form-item label=\"账号:\" prop=\"username\">\r\n\t\t\t\t\t<el-input v-model=\"ruleForm.username\" placeholder=\"请输入账号\" maxlength=\"20\" style=\"float: left;\"/>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"员工姓名:\" prop=\"name\">\r\n\t\t\t\t\t<el-input v-model=\"ruleForm.name\" placeholder=\"请输入员工姓名\" maxlength=\"20\" style=\"float: left;\"/>\r\n\t\t\t\t</el-form-item>\r\n\r\n\t\t\t\t<el-form-item label=\"手机号:\" prop=\"phone\">\r\n\t\t\t\t\t<el-input v-model=\"ruleForm.phone\" placeholder=\"请输入手机号\" maxlength=\"20\" style=\"float: left;\"/>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"性别:\" prop=\"sex\">\r\n\t\t\t\t\t<el-radio-group v-model=\"ruleForm.sex\" style=\"float: left;\">\r\n\t\t\t\t\t\t<el-radio label=\"男\"></el-radio>\r\n\t\t\t\t\t\t<el-radio label=\"女\"></el-radio>\r\n\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"身份证号:\" prop=\"idNumber\">\r\n\t\t\t\t\t<el-input v-model=\"ruleForm.idNumber\" placeholder=\"请输入身份证号\" maxlength=\"20\" style=\"float: left;\"/>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<div class=\"subBox address\">\r\n\t\t\t\t\t<el-form-item>\r\n\t\t\t\t\t\t<el-button @click=\"goBack()\">\r\n\t\t\t\t\t\t\t取消\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('ruleForm', false)\">\r\n\t\t\t\t\t\t\t保存\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button v-if=\"actionType == 'add'\" type=\"primary\" class=\"continue\"\r\n\t\t\t\t\t\t\t@click=\"submitForm('ruleForm', true)\">\r\n\t\t\t\t\t\t\t保存并继续添加\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</div>\r\n\t\t\t</el-form>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\tqueryEmployeeById\r\n\t} from '../../api/member.js'\r\n\timport {\r\n\t\tvalidate\r\n\t} from '../../api/validate.js'\r\n\r\n\timport {\r\n\t\tcheckUserName\r\n\t} from '../../api/validate.js'\r\n\r\n\r\n\timport {\r\n\t\tcheckName\r\n\t} from '../../api/validate.js'\r\n\r\n\r\n\timport {\r\n\t\tcheckPhone\r\n\t} from '../../api/validate.js'\r\n\r\n\r\n\timport {\r\n\t\tvalidID\r\n\t} from '../../api/validate.js'\r\n\r\n\timport {\r\n\t\taddEmployee\r\n\t} from '../../api/member.js'\r\n\timport {\r\n\t\teditEmployee\r\n\t} from '../../api/member.js'\r\n\texport default {\r\n\t\tname: 'add',\r\n\t\tel: '#member-add-app',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tid: '',\r\n\t\t\t\tactionType: '',\r\n\t\t\t\truleForm: {\r\n\t\t\t\t\t'name': '',\r\n\t\t\t\t\t'phone': '',\r\n\t\t\t\t\t'sex': '男',\r\n\t\t\t\t\t'idNumber': '',\r\n\t\t\t\t\tusername: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\trules() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t//账号\r\n\t\t\t\t\tusername: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t'validator': checkUserName,\r\n\t\t\t\t\t\ttrigger: 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t//姓名\r\n\t\t\t\t\tname: [{\r\n\t\t\t\t\t\trequired: true,\r\n\t\t\t\t\t\t'validator': checkName,\r\n\t\t\t\t\t\t'trigger': 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t'phone': [{\r\n\t\t\t\t\t\t'required': true,\r\n\t\t\t\t\t\t'validator': checkPhone,\r\n\t\t\t\t\t\t'trigger': 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t'idNumber': [{\r\n\t\t\t\t\t\t'required': true,\r\n\t\t\t\t\t\t'validator': validID,\r\n\t\t\t\t\t\t'trigger': 'blur'\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.$parent.menuActived='2'\r\n\t\t\tthis.id = this.$route.params.id\r\n\t\t\tconsole.log(this.id)\r\n\t\t\tthis.actionType = this.id ? 'edit' : 'add'\r\n\t\t\tthis.$parent.goBackFlag = true;\r\n\t\t\tif (this.id) {\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\r\n\t\t\t\t// console.log(this.$parent.goBackFlag)\r\n\t\t\t\tqueryEmployeeById(this.id).then(res => {\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\t\t\t\t\t\tconsole.log(res.data)\r\n\t\t\t\t\t\tthis.ruleForm = res.data.data\r\n\t\t\t\t\t\tthis.ruleForm.sex = res.data.data.sex === '0' ? '女' : '男'\r\n\t\t\t\t\t\t// this.ruleForm.password = ''\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmitForm(formName, st) {\r\n\t\t\t\tthis.$refs[formName].validate((valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tif (this.actionType === 'add') {\r\n\t\t\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\t\t\t...this.ruleForm,\r\n\t\t\t\t\t\t\t\tsex: this.ruleForm.sex === '女' ? '0' : '1'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taddEmployee(params).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\t\t\tthis.$message.success('员工添加成功！')\r\n\t\t\t\t\t\t\t\t\tif (!st) {\r\n\t\t\t\t\t\t\t\t\t\tthis.goBack()\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.ruleForm = {\r\n\t\t\t\t\t\t\t\t\t\t\tusername: '',\r\n\t\t\t\t\t\t\t\t\t\t\t'name': '',\r\n\t\t\t\t\t\t\t\t\t\t\t'phone': '',\r\n\t\t\t\t\t\t\t\t\t\t\t// 'password': '',\r\n\t\t\t\t\t\t\t\t\t\t\t// 'rePassword': '',/\r\n\t\t\t\t\t\t\t\t\t\t\t'sex': '男',\r\n\t\t\t\t\t\t\t\t\t\t\t'idNumber': ''\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconst params = {\r\n\t\t\t\t\t\t\t\t...this.ruleForm,\r\n\t\t\t\t\t\t\t\tsex: this.ruleForm.sex === '女' ? '0' : '1'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\teditEmployee(params).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\t\t\tthis.$message.success('员工信息修改成功！')\r\n\t\t\t\t\t\t\t\t\tthis.goBack()\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('error submit!!')\r\n\t\t\t\t\t\treturn false\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgoBack() {\r\n\t\t\t\tthis.$parent.goBackFlag=false;\r\n\t\t\t\tthis.$router.push({\r\n\t\t\t\t\tpath: '/member/index'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* @import '../../styles/elmentui/index.css'; */\r\n\t@import '../../styles/common.css';\r\n\t@import '../../styles/page.css';\r\n</style>\n"]}]}