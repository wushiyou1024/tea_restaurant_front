{"remainingRequest":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\login.vue?vue&type=style&index=0&id=10d9df09&scoped=true&lang=css&","dependencies":[{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\login.vue","mtime":1671277012758},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\css-loader\\index.js","mtime":1667713499694},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667713514183},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667713515690},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667713514172}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* @import '../styles/common.css'; */\n@import '../styles/login.css';\n",{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyJA;AACA","file":"login.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n\t<div class=\"login\" id=\"login-app\">\r\n\t\t<div class=\"login-box\">\r\n\t\t\t<img src=\"../assets/login/login-l.png\" alt=\"\">\r\n\t\t\t<div class=\"login-form\">\r\n\t\t\t\t<el-form ref=\"loginForm\" :model=\"loginForm\" :rules=\"loginRules\">\r\n\t\t\t\t\t<div class=\"login-form-title\">\r\n\t\t\t\t\t\t<img src=\"../assets/login/logo.png\" style=\"width:139px;height:42px;\" alt=\"\" />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<el-form-item prop=\"username\">\r\n\t\t\t\t\t\t<el-input v-model=\"loginForm.username\" type=\"text\" auto-complete=\"off\" placeholder=\"账号\"\r\n\t\t\t\t\t\t\tmaxlength=\"20\" prefix-icon=\"iconfont icon-user\" />\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item prop=\"password\">\r\n\t\t\t\t\t\t<el-input v-model=\"loginForm.password\" type=\"password\" placeholder=\"密码\"\r\n\t\t\t\t\t\t\tprefix-icon=\"iconfont icon-lock\" maxlength=\"20\" @keyup.enter.native=\"handleLogin\" />\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t\t<el-form-item style=\"width:100%;\">\r\n\t\t\t\t\t\t<el-button :loading=\"loading\" class=\"login-btn\" size=\"medium\" type=\"primary\" style=\"width:100%;\"\r\n\t\t\t\t\t\t\t@click.native.prevent=\"handleLogin\">\r\n\t\t\t\t\t\t\t<span v-if=\"!loading\">登录</span>\r\n\t\t\t\t\t\t\t<span v-else>登录中...</span>\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n\r\n\r\n\r\n<script>\r\n\timport {\r\n\t\tloginApi\r\n\t} from '../api/login.js'\r\n  import {\r\n\t  mapi\r\n  } from '../assets/20221216191223639c5297f3d58.mp3'\r\n\r\n\texport default {\r\n\t\tname: 'login',\r\n\t\tel: '#login-app',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tpath:\"ws://localhost:8080/webSocket\",\r\n\t\t\t\tsocket:\"\",\r\n\t\t\t\tloginForm: {\r\n\t\t\t\t\tusername: 'admin',\r\n\t\t\t\t\tpassword: '123456'\r\n\t\t\t\t},\r\n\t\t\t\tloading: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tloginRules() {\r\n\t\t\t\tconst validateUsername = (rule, value, callback) => {\r\n\t\t\t\t\tif (value.length < 1) {\r\n\t\t\t\t\t\tcallback(new Error('请输入用户名'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst validatePassword = (rule, value, callback) => {\r\n\t\t\t\t\tif (value.length < 6) {\r\n\t\t\t\t\t\tcallback(new Error('密码必须在6位以上'))\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcallback()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\r\n\t\t\t\t\t'username': [{\r\n\t\t\t\t\t\t'validator': validateUsername,\r\n\t\t\t\t\t\t'trigger': 'blur'\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t'password': [{\r\n\t\t\t\t\t\t'validator': validatePassword,\r\n\t\t\t\t\t\t'trigger': 'blur'\r\n\t\t\t\t\t}],\r\n\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {},\r\n\t\tmethods: {\r\n\t\t\tasync handleLogin() {\r\n\t\t\t\tthis.$refs.loginForm.validate(async (valid) => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\t\tlet res = await loginApi(this.loginForm)\r\n\r\n\t\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\t\t\t\t\t\t\tconsole.log(\"11\")\r\n\t\t\t\t\t\t\tthis.init()\r\n\t\t\t\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(res.data))\r\n\t\t\t\t\t\t\t//进行路由\r\n\t\t\t\t\t\t\tthis.$router.push({\r\n\t\t\t\t\t\t\t\tpath: '/member/index'\r\n\t\t\t\t\t\t\t})\r\n\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tconsole.log(\"222\")\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.msg)\r\n\t\t\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// websocket测试\r\n\t\t\tinit: function () {\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(this.path)\r\n\t\t\t    if(typeof(WebSocket) === \"undefined\"){\r\n\t\t\t        alert(\"您的浏览器不支持socket\")\r\n\t\t\t    }else{\r\n\t\t\t        // 实例化socket\r\n\t\t\t        this.socket = new WebSocket(this.path)\r\n\t\t\t        // 监听socket连接\r\n\t\t\t        this.socket.onopen = this.open\r\n\t\t\t        // 监听socket错误信息\r\n\t\t\t        this.socket.onerror = this.error\r\n\t\t\t        // 监听socket消息\r\n\t\t\t        this.socket.onmessage = this.getMessage\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\topen: function () {\r\n\t\t\t    console.log(\"socket连接成功\")\r\n\t\t\t},\r\n\t\t\terror: function () {\r\n\t\t\t    console.log(\"连接错误\")\r\n\t\t\t},\r\n\t\t\tgetMessage: function (msg) {\r\n\t\t\t    console.log(msg.data)\r\n\t\t\t  let audio=  new Audio();\r\n\t\t\t  audio.src= 'https://gitee.com/Bless_Wu/hometown/raw/master/20221216191223639c5297f3d58.mp3';\r\n\t\t\t  audio.play()\r\n\t\t\t},\r\n\t\t\tsend: function () {\r\n\t\t\t\tlet code=4\r\n\t\t\t    this.socket.send(code)\r\n\t\t\t},\r\n\t\t\tclose: function () {\r\n\t\t\t    console.log(\"socket已经关闭\")\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* @import '../styles/common.css'; */\r\n\t@import '../styles/login.css';\r\n</style>\n"]}]}