{"remainingRequest":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\category\\list.vue?vue&type=style&index=0&id=650b50a2&scoped=true&lang=css&","dependencies":[{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\src\\components\\category\\list.vue","mtime":1669685044525},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\css-loader\\index.js","mtime":1667713499694},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1667713514183},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\postcss-loader\\src\\index.js","mtime":1667713515690},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1667713506232},{"path":"D:\\尚硅谷\\uniapp_storage\\tea_backend\\node_modules\\vue-loader\\lib\\index.js","mtime":1667713514172}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/* \t@import '../../styles/common.css';\n@import '../../styles/page.css'; */\n/* @import '../../styles/elmentui/index.css' */\n",{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqPA;AACA;AACA","file":"list.vue","sourceRoot":"src/components/category","sourcesContent":["<template>\r\n\t<div class=\"dashboard-container\" id=\"category-app\">\r\n\t\t<div class=\"container\" style=\"height:600px; overflow:auto\">\r\n\t\t\t<div class=\"tableBar\" style=\"display: inline-block;float: left;\">\r\n\t\t\t\t<el-button type=\"primary\" class=\"continue\" @click=\"addClass('class')\">\r\n\t\t\t\t\t+ 新增菜品分类\r\n\t\t\t\t</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"addClass('meal')\">\r\n\t\t\t\t\t+ 新增套餐分类\r\n\t\t\t\t</el-button>\r\n\t\t\t</div>\r\n\t\t\t<el-table :data=\"tableData\" stripe class=\"tableBox\">\r\n\t\t\t\t<el-table-column prop=\"name\" label=\"分类名称\" />\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"type\" label=\"分类类型\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<span>{{ scope.row.type == '1' ? '菜品分类': '套餐分类' }}</span>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"updateTime\" label=\"操作时间\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t{{scope.row.updateTime}}\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column prop=\"sort\" label=\"排序\" />\r\n\t\t\t\t</el-table-column>\r\n\t\t\t\t<el-table-column label=\"操作\" width=\"160\" align=\"center\">\r\n\t\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"editHandle(scope.row)\">\r\n\t\t\t\t\t\t\t修改\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t\t<el-button type=\"text\" size=\"small\" class=\"delBut non\" @click=\"deleteHandle(scope.row.id)\">\r\n\t\t\t\t\t\t\t删除\r\n\t\t\t\t\t\t</el-button>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</el-table-column>\r\n\t\t\t</el-table>\r\n\t\t\t<el-pagination class=\"pageList\" :page-sizes=\"[5,10, 20, 30, 40]\" :page-size=\"pageSize\"\r\n\t\t\t\tlayout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" :current-page.sync=\"page\"\r\n\t\t\t\t@size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"></el-pagination>\r\n\t\t</div>\r\n\t\t<el-dialog :title=\"classData.title\" :visible.sync=\"classData.dialogVisible\" width=\"30%\"\r\n\t\t\t:before-close=\"handleClose\">\r\n\t\t\t<el-form class=\"demo-form-inline\" label-width=\"100px\">\r\n\t\t\t\t<el-form-item label=\"分类名称：\">\r\n\t\t\t\t\t<el-input v-model=\"classData.name\" placeholder=\"请输入分类名称\" maxlength=\"14\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"排序：\">\r\n\t\t\t\t\t<el-input v-model=\"classData.sort\" type=\"number\" placeholder=\"请输入排序\" />\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<span slot=\"footer\" class=\"dialog-footer\">\r\n\t\t\t\t<el-button size=\"medium\" @click=\"classData.dialogVisible = false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" size=\"medium\" @click=\"submitForm()\">确 定</el-button>\r\n\t\t\t\t<el-button v-if=\"action != 'edit'\" type=\"primary\" size=\"medium\" class=\"continue\"\r\n\t\t\t\t\t@click=\"submitForm('go')\"> 保存并继续添加 </el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport {\r\n\t\taddCategory\r\n\t} from '../../api/category.js'\r\n\timport {\r\n\t\teditCategory\r\n\t} from '../../api/category.js'\r\n\timport {\r\n\t\tdeleCategory\r\n\t} from '../../api/category.js'\r\n\r\n\timport {\r\n\t\tqueryCategoryById\r\n\t} from '../../api/category.js'\r\n\timport {\r\n\t\tgetCategoryPage\r\n\t} from '../../api/category.js'\r\n\r\n\texport default {\r\n\t\tname: 'clist',\r\n\t\tel: '#category-app',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\taction: '',\r\n\t\t\t\tcounts: 0,\r\n\t\t\t\tpage: 1,\r\n\t\t\t\tpageSize: 5,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\ttype: '',\r\n\t\t\t\tclassData: {\r\n\t\t\t\t\t'title': '添加菜品分类',\r\n\t\t\t\t\t'dialogVisible': false,\r\n\t\t\t\t\t'categoryId': '',\r\n\t\t\t\t\t'name': '',\r\n\t\t\t\t\tsort: ''\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {},\r\n\t\tcreated() {\r\n\t\t\tthis.init()\r\n\t\t},\r\n\t\tmounted() {},\r\n\t\tmethods: {\r\n\t\t\tasync init() {\r\n\t\t\t\tawait getCategoryPage({\r\n\t\t\t\t\t'page': this.page,\r\n\t\t\t\t\t'pageSize': this.pageSize\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\tif (String(res.data.code) === '1') {\r\n\t\t\t\t\t\tthis.tableData = res.data.data.records\r\n\t\t\t\t\t\tthis.counts = Number(res.data.data.total)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleQuery() {\r\n\t\t\t\tthis.page = 1;\r\n\t\t\t\tthis.init();\r\n\t\t\t},\r\n\t\t\t// 添加\r\n\t\t\taddClass(st) {\r\n\t\t\t\tif (st == 'class') {\r\n\t\t\t\t\tthis.classData.title = '新增菜品分类'\r\n\t\t\t\t\tthis.type = '1'\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.classData.title = '新增套餐分类'\r\n\t\t\t\t\tthis.type = '2'\r\n\t\t\t\t}\r\n\t\t\t\tthis.action = 'add'\r\n\t\t\t\tthis.classData.name = ''\r\n\t\t\t\tthis.classData.sort = ''\r\n\t\t\t\tthis.classData.dialogVisible = true\r\n\t\t\t},\r\n\t\t\teditHandle(dat) {\r\n\t\t\t\tthis.classData.title = '修改分类'\r\n\t\t\t\tthis.action = 'edit'\r\n\t\t\t\tthis.classData.name = dat.name\r\n\t\t\t\tthis.classData.sort = dat.sort\r\n\t\t\t\tthis.classData.id = dat.id\r\n\t\t\t\tthis.classData.dialogVisible = true\r\n\t\t\t},\r\n\t\t\t// 关闭弹窗\r\n\t\t\thandleClose(st) {\r\n\t\t\t\tthis.classData.dialogVisible = false\r\n\t\t\t},\r\n\t\t\t//删除\r\n\t\t\tdeleteHandle(id) {\r\n\t\t\t\tthis.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n\t\t\t\t\t'confirmButtonText': '确定',\r\n\t\t\t\t\t'cancelButtonText': '取消',\r\n\t\t\t\t\t'type': 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tdeleCategory(id).then(res => {\r\n\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\tthis.$message.success('删除成功！')\r\n\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error(res.data.msg || '操作失败')\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//数据提交\r\n\t\t\tsubmitForm(st) {\r\n\t\t\t\tconst classData = this.classData\r\n\t\t\t\tconst valid = (classData.name === 0 || classData.name) && (classData.sort === 0 || classData.sort)\r\n\t\t\t\tif (this.action === 'add') {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tconst reg = /^\\d+$/\r\n\t\t\t\t\t\tif (reg.test(classData.sort)) {\r\n\t\t\t\t\t\t\taddCategory({\r\n\t\t\t\t\t\t\t\t'name': classData.name,\r\n\t\t\t\t\t\t\t\t'type': this.type,\r\n\t\t\t\t\t\t\t\tsort: classData.sort\r\n\t\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\t\t\tthis.$message.success('分类添加成功！')\r\n\t\t\t\t\t\t\t\t\tif (!st) {\r\n\t\t\t\t\t\t\t\t\t\tthis.classData.dialogVisible = false\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tthis.classData.name = ''\r\n\t\t\t\t\t\t\t\t\t\tthis.classData.sort = ''\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$message.error('排序只能输入数字类型')\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error('请输入分类名称或排序')\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (valid) {\r\n\t\t\t\t\tconst reg = /^\\d+$/\r\n\t\t\t\t\tif (reg.test(this.classData.sort)) {\r\n\t\t\t\t\t\teditCategory({\r\n\t\t\t\t\t\t\t'id': this.classData.id,\r\n\t\t\t\t\t\t\t'name': this.classData.name,\r\n\t\t\t\t\t\t\tsort: this.classData.sort\r\n\t\t\t\t\t\t}).then(res => {\r\n\t\t\t\t\t\t\tif (res.data.code === 1) {\r\n\t\t\t\t\t\t\t\tthis.$message.success('分类修改成功！')\r\n\t\t\t\t\t\t\t\tthis.classData.dialogVisible = false\r\n\t\t\t\t\t\t\t\tthis.handleQuery()\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.$message.error(res.msg || '操作失败')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t\tthis.$message.error('请求出错了：' + err)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error('排序只能输入数字类型')\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.$message.error('请输入分类名称或排序')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleSizeChange(val) {\r\n\t\t\t\tthis.pageSize = val\r\n\t\t\t\tthis.init()\r\n\t\t\t},\r\n\t\t\thandleCurrentChange(val) {\r\n\t\t\t\tconsole.log(val)\r\n\t\t\t\tthis.page = val\r\n\t\t\t\tthis.init()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* \t@import '../../styles/common.css';\r\n\t@import '../../styles/page.css'; */\r\n\t/* @import '../../styles/elmentui/index.css' */\r\n</style>\n"]}]}