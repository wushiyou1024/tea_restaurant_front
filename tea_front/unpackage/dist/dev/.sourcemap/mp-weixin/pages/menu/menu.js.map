{"version":3,"sources":["uni-app:///main.js","webpack:///D:/尚硅谷/uniapp_storage/tea_front/pages/menu/menu.vue?964a","webpack:///D:/尚硅谷/uniapp_storage/tea_front/pages/menu/menu.vue?43a3","webpack:///D:/尚硅谷/uniapp_storage/tea_front/pages/menu/menu.vue?7654","webpack:///D:/尚硅谷/uniapp_storage/tea_front/pages/menu/menu.vue?d330","uni-app:///pages/menu/menu.vue","webpack:///D:/尚硅谷/uniapp_storage/tea_front/pages/menu/menu.vue?f34b","webpack:///D:/尚硅谷/uniapp_storage/tea_front/pages/menu/menu.vue?07ad"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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","file":"pages/menu/menu.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/menu/menu.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./menu.vue?vue&type=template&id=368aef34&scoped=true&\"\nvar renderjs\nimport script from \"./menu.vue?vue&type=script&lang=js&\"\nexport * from \"./menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./menu.vue?vue&type=style&index=0&id=368aef34&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"368aef34\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/menu/menu.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./menu.vue?vue&type=template&id=368aef34&scoped=true&\"","var components\ntry {\n  components = {\n    modal: function() {\n      return import(\n        /* webpackChunkName: \"components/modal/modal\" */ \"@/components/modal/modal.vue\"\n      )\n    },\n    popupLayer: function() {\n      return import(\n        /* webpackChunkName: \"components/popup-layer/popup-layer\" */ \"@/components/popup-layer/popup-layer.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    !_vm.loading && _vm.goods.length\n      ? _vm.__map(_vm.currentGoods, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var m0 =\n            item.flavors && item.flavors.length != 0\n              ? _vm.goodCartNum(item.id)\n              : null\n          var m1 =\n            item.flavors && item.flavors.length != 0\n              ? _vm.goodCartNum(item.id)\n              : null\n          var m2 = !(item.flavors && item.flavors.length != 0)\n            ? _vm.goodCartNum(item.id)\n            : null\n          var m3 = !(item.flavors && item.flavors.length != 0)\n            ? _vm.goodCartNum(item.id)\n            : null\n          var m4 = !(item.flavors && item.flavors.length != 0)\n            ? _vm.goodCartNum(item.id)\n            : null\n          return {\n            $orig: $orig,\n            m0: m0,\n            m1: m1,\n            m2: m2,\n            m3: m3,\n            m4: m4\n          }\n        })\n      : null\n  var m5 = !_vm.loading ? _vm.getGoodSelectedProps(_vm.good) : null\n  var m6 =\n    !_vm.loading && _vm.orderType == \"takeout\" && _vm.store.packing_fee\n      ? parseFloat(_vm.store.packing_fee)\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        m5: m5,\n        m6: m6\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./menu.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\" v-if=\"!loading\">\r\n\t\t<view class=\"main\" v-if=\"goods.length\">\r\n\t\t\t<view class=\"nav\">\r\n\t\t\t\t<view class=\"header\">\r\n\t\t\t\t\t<view class=\"left\" v-if=\"orderType == 'takein'\">\r\n\t\t\t\t\t\t<view class=\"store-name\">\r\n\t\t\t\t\t\t\t<text>{{ store.name }}</text>\r\n\t\t\t\t\t\t\t<view class=\"iconfont iconarrow-right\"></view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"store-location\">\r\n\t\t\t\t\t\t\t<image src='/static/images/order/location.png' style=\"width: 30rpx; height: 30rpx;\"\r\n\t\t\t\t\t\t\t\tclass=\"mr-10\"></image>\r\n\t\t\t\t\t\t\t<text>距离您 {{ store.distance_text }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"left overflow-hidden\" v-else>\r\n\t\t\t\t\t\t<view class=\"d-flex align-items-center overflow-hidden\">\r\n\t\t\t\t\t\t\t<image src='/static/images/order/location.png' style=\"width: 30rpx; height: 30rpx;\"\r\n\t\t\t\t\t\t\t\tclass=\"mr-10\"></image>\r\n\t\t\t\t\t\t\t<view class=\"font-size-extra-lg text-color-base font-weight-bold text-truncate\">\r\n\t\t\t\t\t\t\t\t{{ address.detail }}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"font-size-sm text-color-assist overflow-hidden text-truncate\">\r\n\t\t\t\t\t\t\t由<text class=\"text-color-base\" style=\"margin: 0 10rpx\">{{ store.name }}</text>配送\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t<view class=\"dinein\" :class=\"{active: orderType == 'takein'}\" @tap=\"SET_ORDER_TYPE('takein')\">\r\n\t\t\t\t\t\t\t<text>自取</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"takeout\" :class=\"{active: orderType == 'takeout'}\" @tap=\"takout\">\r\n\t\t\t\t\t\t\t<text>外卖</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"coupon\">\r\n\t\t\t\t\t<text class=\"title\">\"霸气mini卡\"超级购券活动，赶紧去购买</text>\r\n\t\t\t\t\t<view class=\"iconfont iconarrow-right\"></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"content\">\r\n\t\t\t\t<scroll-view class=\"menus\" :scroll-into-view=\"menuScrollIntoView\" scroll-with-animation scroll-y>\r\n\t\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\t<view class=\"menu\" :id=\"`menu-${item.id}`\" :class=\"{'current': item.id == currentCateId}\"\r\n\t\t\t\t\t\t\tv-for=\"(item, index) in indexCategory\" :key=\"index\" @tap=\"handleMenuTap(item.id,item.type)\">\r\n\t\t\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t\t\t\t<!-- <view class=\"dot\" v-show=\"menuCartNum(item.id)\">{{ menuCartNum(item.id) }}</view> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<!-- goods list begin -->\r\n\t\t\t\t<scroll-view class=\"goods\" scroll-with-animation scroll-y :scroll-top=\"cateScrollTop\"\r\n\t\t\t\t\t@scroll=\"handleGoodsScroll\">\r\n\t\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\t<swiper class=\"ads\" id=\"ads\" autoplay :interval=\"3000\" indicator-dots>\r\n\t\t\t\t\t\t\t<swiper-item v-for=\"(item, index) in ads\" :key='index'>\r\n\t\t\t\t\t\t\t\t<image :src=\"item.image\"></image>\r\n\t\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t\t</swiper>\r\n\t\t\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t\t\t<!-- category begin -->\r\n\t\t\t\t\t\t\t<view class=\"category\" v-for=\"(item, index) in currentGoods\" :key=\"index\" :id=\"item.id\">\r\n\t\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t\t<text>{{ item.name }}</text>\r\n\t\t\t\t\t\t\t\t\t<!-- \t<image :src=\"item.icon\" class=\"icon\"></image> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"items\">\r\n\t\t\t\t\t\t\t\t\t<!-- 商品 begin -->\r\n\t\t\t\t\t\t\t\t\t<view class=\"good\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"'http://192.168.0.108:8080/common/download?name='+item.image\"\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"image\" @tap=\"showGoodDetailModal(item, good)\">\r\n\t\t\t\t\t\t\t\t\t\t</image>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"name\">{{ item.name }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<text class=\"tips\">{{ item.description }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"price_and_action\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"price\">￥{{ item.price}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"btn-group\" v-if=\"item.flavors && item.flavors.length!=0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"primary\" class=\"btn property_btn\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsize=\"mini\" @tap=\"showGoodDetailModal(item, good)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t选规格\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"dot\" v-show=\"goodCartNum(item.id)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ goodCartNum(item.id) }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"btn-group\" v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"default\" v-show=\"goodCartNum(item.id)\" plain\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"btn reduce_btn\" size=\"mini\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@tap=\"handleReduceFromCart(item, good)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"iconfont iconsami-select\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"number\" v-show=\"goodCartNum(item.id)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ goodCartNum(item.id) }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<button type=\"primary\" class=\"btn add_btn\" size=\"min\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thover-class=\"none\" @tap=\"handleAddToCart(item, item, 1)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"iconfont iconadd-select\"></view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<!-- 商品 end -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- category end -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t\t<!-- goods list end -->\r\n\t\t\t</view>\r\n\t\t\t<!-- content end -->\r\n\t\t\t<!-- 购物车栏 begin -->\r\n\t\t\t<view class=\"cart-box\" v-if=\"cart.length > 0\">\r\n\t\t\t\t<view class=\"mark\">\r\n\t\t\t\t\t<image src=\"/static/images/menu/cart.png\" class=\"cart-img\" @tap=\"openCartPopup\"></image>\r\n\t\t\t\t\t<view class=\"tag\">{{ getCartGoodsNumber }}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"price\">￥{{ getCartGoodsPrice }}</view>\r\n\t\t\t\t<button type=\"primary\" class=\"pay-btn\" @tap=\"toPay\" :disabled=\"disabledPay\">\r\n\t\t\t\t\t{{ disabledPay ? `差${spread}元起送` : '去结算' }}\r\n\t\t\t\t</button>\r\n\t\t\t</view>\r\n\t\t\t<!-- 购物车栏 end -->\r\n\t\t</view>\r\n\t\t<!-- 商品详情模态框 begin -->\r\n\t\t<modal :show=\"goodDetailModalVisible\" class=\"good-detail-modal\" color=\"#5A5B5C\" width=\"90%\" custom\r\n\t\t\tpadding=\"0rpx\" radius=\"12rpx\">\r\n\t\t\t<view class=\"cover\">\r\n\t\t\t\t<image v-if=\"good.image\" :src=\"'http://192.168.0.108:8080/common/download?name='+good.image\" class=\"image\">\r\n\t\t\t\t</image>\r\n\t\t\t\t<view class=\"btn-group\">\r\n\t\t\t\t\t<image src=\"/static/images/menu/share-good.png\"></image>\r\n\t\t\t\t\t<image src=\"/static/images/menu/close.png\" @tap=\"closeGoodDetailModal\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<scroll-view class=\"detail\" scroll-y>\r\n\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t<view class=\"basic\">\r\n\t\t\t\t\t\t<view class=\"name\">{{ good.name }}</view>\r\n\t\t\t\t\t\t<view class=\"tips\">{{ good.description }}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"properties\">\r\n\t\t\t\t\t\t<view class=\"property\" v-for=\"(item, index) in good.flavors\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"title\">\r\n\t\t\t\t\t\t\t\t<text class=\"name\">{{ item.name }}</text>\r\n\t\t\t\t\t\t\t\t<!-- <view class=\"desc\" v-if=\"item.desc\">({{ item.desc }})</view> -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"values\">\r\n\t\t\t\t\t\t\t\t<!-- 11月25 -->\r\n\t\t\t\t\t\t\t\t<view class=\"value\" v-for=\"(value, key) in item.values   \" :key=\"key\"\r\n\t\t\t\t\t\t\t\t\t:class=\"{'default': value.is_default}\" @tap=\"changePropertyDefault(index, key)\">\r\n\t\t\t\t\t\t\t\t\t{{ value.value }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<view class=\"action\">\r\n\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t<view class=\"price\">￥{{ good.price}}</view>\r\n\t\t\t\t\t<view class=\"props\">\r\n\t\t\t\t\t\t{{ getGoodSelectedProps(good) }}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn-group\">\r\n\t\t\t\t\t<button type=\"default\" plain class=\"btn\" size=\"mini\" hover-class=\"none\" @tap=\"handlePropertyReduce\">\r\n\t\t\t\t\t\t<view class=\"iconfont iconsami-select\"></view>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<view class=\"number\">{{ good.number }}</view>\r\n\t\t\t\t\t<button type=\"primary\" class=\"btn\" size=\"min\" hover-class=\"none\" @tap=\"handlePropertyAdd\">\r\n\t\t\t\t\t\t<view class=\"iconfont iconadd-select\"></view>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"add-to-cart-btn\" @tap=\"handleAddToCartInModal\">\r\n\t\t\t\t<view>加入购物车</view>\r\n\t\t\t</view>\r\n\t\t</modal>\r\n\t\t<!-- 商品详情模态框 end -->\r\n\t\t<!-- 购物车详情popup -->\r\n\t\t<popup-layer direction=\"top\" :show-pop=\"cartPopupVisible\" class=\"cart-popup\">\r\n\t\t\t<template slot=\"content\">\r\n\t\t\t\t<view class=\"top\">\r\n\t\t\t\t\t<text @tap=\"handleCartClear\">清空</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<scroll-view class=\"cart-list\" scroll-y>\r\n\t\t\t\t\t<view class=\"wrapper\">\r\n\t\t\t\t\t\t<view class=\"item\" v-for=\"(item, index) in cart\" :key=\"index\">\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<view class=\"name\">{{ item.name }}</view>\r\n\t\t\t\t\t\t\t\t<view class=\"props\">{{ item.dishFlavor }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"center\">\r\n\t\t\t\t\t\t\t\t<text>￥{{ item.amount }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t<button type=\"default\" plain size=\"mini\" class=\"btn\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"handleCartItemReduce(index)\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"iconfont iconsami-select\"></view>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<view class=\"number\">{{ item.number }}</view>\r\n\t\t\t\t\t\t\t\t<button type=\"primary\" class=\"btn\" size=\"min\" hover-class=\"none\"\r\n\t\t\t\t\t\t\t\t\t@tap=\"handleCartItemAdd(index)\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"iconfont iconadd-select\"></view>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"item\" v-if=\"orderType == 'takeout' && store.packing_fee\">\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<view class=\"name\">包装费</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"center\">\r\n\t\t\t\t\t\t\t\t<text>￥{{ parseFloat(store.packing_fee) }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"right invisible\">\r\n\t\t\t\t\t\t\t\t<button type=\"default\" plain size=\"mini\" class=\"btn\" hover-class=\"none\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"iconfont iconsami-select\"></view>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<view class=\"number\">1</view>\r\n\t\t\t\t\t\t\t\t<button type=\"primary\" class=\"btn\" size=\"min\" hover-class=\"none\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"iconfont iconadd-select\"></view>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\t\t\t</template>\r\n\t\t</popup-layer>\r\n\t\t<!-- 购物车详情popup -->\r\n\t</view>\r\n\t<view class=\"loading\" v-else>\r\n\t\t<image src=\"/static/images/loading.gif\"></image>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport modal from '@/components/modal/modal'\r\n\timport popupLayer from '@/components/popup-layer/popup-layer'\r\n\timport {\r\n\t\tmapState,\r\n\t\tmapMutations,\r\n\t\tmapActions,\r\n\t\tmapGetters\r\n\t} from 'vuex'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tmodal,\r\n\t\t\tpopupLayer\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdefaultflag: 0,\r\n\t\t\t\tgoods: [], //所有商品\r\n\t\t\t\tindexCategory: [],\r\n\t\t\t\tads: [{\r\n\t\t\t\t\t\timage: 'https://img-shop.qmimg.cn/s23107/2020/04/27/4ebdb582a5185358c4.jpg?imageView2/2/w/600/h/600'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timage: 'https://images.qmai.cn/s23107/2020/05/08/c25de6ef72d2890630.png?imageView2/2/w/600/h/600'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timage: 'https://img-shop.qmimg.cn/s23107/2020/04/10/add546c1b1561f880d.jpg?imageView2/2/w/600/h/600'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timage: 'https://images.qmai.cn/s23107/2020/04/30/b3af19e0de8ed42f61.jpg?imageView2/2/w/600/h/600'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\timage: 'https://img-shop.qmimg.cn/s23107/2020/04/17/8aeb78516d63864420.jpg?imageView2/2/w/600/h/600'\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\tloading: true,\r\n\t\t\t\tcurrentCateId: 1397844263642378242, //默认分类\r\n\r\n\t\t\t\tcateScrollTop: 0,\r\n\t\t\t\tmenuScrollIntoView: '',\r\n\t\t\t\tcart: [], //购物车\r\n\t\t\t\tgoodDetailModalVisible: false, //是否饮品详情模态框\r\n\t\t\t\tgood: {}, //当前饮品\r\n\t\t\t\tcategory: {}, //当前饮品所在分类\r\n\t\t\t\tcartPopupVisible: false,\r\n\t\t\t\tsizeCalcState: false,\r\n\t\t\t\tcurrentGoods: [],\r\n\t\t\t\tobj: {},\r\n\t\t\t\ttest: [],\r\n\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tasync onLoad() {\r\n\t\t\tawait this.init()\r\n\r\n\t\t},\r\n\t\tonShow() {\r\n\r\n\t\t\tthis.getCart()\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\r\n\t\t\t...mapState(['member']),\r\n\t\t\t...mapState(['orderType', 'address', 'store']),\r\n\t\t\t...mapGetters(['isLogin']),\r\n\t\t\tgoodCartNum() {\r\n\t\t\t\t// console.log(this.cart)\r\n\r\n\t\t\t\t//计算单个饮品添加到购物车的数量\r\n\t\t\t\treturn (id) => this.cart.reduce((acc, cur) => {\r\n\t\t\t\t\t// console.log(id)\r\n\t\t\t\t\tif (cur.dishId === id) {\r\n\t\t\t\t\t\treturn acc += cur.number\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn acc\r\n\t\t\t\t}, 0)\r\n\t\t\t},\r\n\t\t\tmenuCartNum() {\r\n\t\t\t\treturn (id) => this.cart.reduce((acc, cur) => {\r\n\t\t\t\t\tif (cur.cate_id === id) {\r\n\t\t\t\t\t\treturn acc += cur.number\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn acc\r\n\t\t\t\t}, 0)\r\n\t\t\t},\r\n\t\t\tgetCartGoodsNumber() { //计算购物车总数\r\n\t\t\t\treturn this.cart.reduce((acc, cur) => acc + cur.number, 0)\r\n\t\t\t},\r\n\t\t\tgetCartGoodsPrice() { //计算购物车总价\r\n\t\t\t\treturn this.cart.reduce((acc, cur) => acc + cur.number * (cur.amount), 0)\r\n\t\t\t},\r\n\t\t\tdisabledPay() { //是否达到起送价\r\n\t\t\t\treturn this.orderType == 'takeout' && (this.getCartGoodsPrice < this.store.min_price) ? true : false\r\n\t\t\t},\r\n\t\t\tspread() { //差多少元起送\r\n\t\t\t\tif (this.orderType != 'takeout') return\r\n\t\t\t\treturn parseFloat((this.store.min_price - this.getCartGoodsPrice).toFixed(2))\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations(['SET_ORDER_TYPE']),\r\n\t\t\t...mapActions(['getStore']),\r\n\r\n\r\n\t\t\tasync getCart() {\r\n\t\t\t\tconst res = await this.$myRequet({\r\n\t\t\t\t\turl: '/shoppingCart/list',\r\n\t\t\t\t\tmethod: 'get',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tuserid: this.member.customerId\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\tthis.cart = res.data.data\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(this.cart)\r\n\t\t\t},\r\n\r\n\t\t\tasync init() { //页面初始化\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\tawait this.getStore()\r\n\t\t\t\tvar id = '1397844263642378242'\r\n\r\n\t\t\t\tawait this.getGoodsByCategory(id)\r\n\t\t\t\t// this.currentGoods=[...this.currentGoods,]\t\r\n\t\t\t\tconst res = await this.$myRequet({\r\n\t\t\t\t\turl: '/category/list',\r\n\t\t\t\t\tmethod: 'get'\r\n\t\t\t\t})\r\n\t\t\t\tthis.indexCategory = [...this.indexCategory, ...res.data.data]\r\n\r\n\t\t\t\t// console.log(res.data.data)\r\n\t\t\t\tthis.goods = await this.$api('goods')\r\n\t\t\t\tthis.loading = false\r\n\r\n\t\t\t\t// this.cart = uni.getStorageSync('cart') || []\r\n\t\t\t\t// console.log(this.cart);\r\n\t\t\t},\r\n\t\t\ttakout() {\r\n\t\t\t\tif (this.orderType == 'takeout') return\r\n\r\n\t\t\t\tif (!this.isLogin) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/address/address?is_choose=true'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleMenuTap(id, type) { //点击菜单项事件\r\n\t\t\t\t// if (!this.sizeCalcState) {\r\n\t\t\t\t// \tthis.calcSize()\r\n\t\t\t\t// }\r\n\t\t\t\tif (type === 1) {\r\n\t\t\t\t\tthis.getGoodsByCategory(id)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.getsetmealByCategory(id)\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentCateId = id\r\n\r\n\r\n\t\t\t\t// this.$nextTick(() => this.cateScrollTop = this.goods.find(item => item.id == id).top)\r\n\t\t\t},\r\n\t\t\tasync getsetmealByCategory(id) {\r\n\r\n\r\n\t\t\t\tconst res = await this.$myRequet({\r\n\t\t\t\t\turl: '/setmeal/list?categoryId=' + id + '&status=1',\r\n\t\t\t\t\tmethod: 'get'\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.currentGoods = res.data.data;\r\n\r\n\t\t\t},\r\n\t\t\tasync getGoodsByCategory(id) {\r\n\r\n\r\n\t\t\t\tconst res = await this.$myRequet({\r\n\t\t\t\t\turl: '/dish/list?categoryId=' + id + '&status=1'\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.currentGoods = res.data.data;\r\n\t\t\t},\r\n\t\t\thandleGoodsScroll({\r\n\t\t\t\tdetail\r\n\t\t\t}) { //商品列表滚动事件\r\n\t\t\t\tif (!this.sizeCalcState) {\r\n\t\t\t\t\tthis.calcSize()\r\n\t\t\t\t}\r\n\t\t\t\tconst {\r\n\t\t\t\t\tscrollTop\r\n\t\t\t\t} = detail\r\n\t\t\t\tlet tabs = this.goods.filter(item => item.top <= scrollTop).reverse()\r\n\t\t\t\tif (tabs.length > 0) {\r\n\t\t\t\t\tthis.currentCateId = tabs[0].id\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcalcSize() {\r\n\t\t\t\t// let h = 10\r\n\r\n\t\t\t\t// let view = uni.createSelectorQuery().select('#ads')\r\n\t\t\t\t// view.fields({\r\n\t\t\t\t// \tsize: true\r\n\t\t\t\t// }, data => {\r\n\t\t\t\t// \th += Math.floor(data.height)\r\n\t\t\t\t// }).exec()\r\n\r\n\t\t\t\t// this.goods.forEach(item => {\r\n\t\t\t\t// \tlet view = uni.createSelectorQuery().select(`#cate-${item.id}`)\r\n\t\t\t\t// \tview.fields({\r\n\t\t\t\t// \t\tsize: true\r\n\t\t\t\t// \t}, data => {\r\n\t\t\t\t// \t\titem.top = h\r\n\t\t\t\t// \t\th += data.height\r\n\t\t\t\t// \t\titem.bottom = h\r\n\t\t\t\t// \t}).exec()\r\n\t\t\t\t// })\r\n\t\t\t\t// this.sizeCalcState = true\r\n\t\t\t},\r\n\t\t\tasync handleAddToCart(cate, good, num) { //添加到购物车\r\n\t\t\t\t// console.log(\"----------------------\")\r\n\r\n\t\t\t\tif (!this.isLogin) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(good)\r\n\t\t\t\tconst index = this.cart.findIndex(item => {\r\n\t\t\t\t\tif (good.use_property) {\r\n\t\t\t\t\t\treturn (item.id === good.id) && (item.props_text === good.props_text)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn item.id === good.id\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tif (index > -1) {\r\n\t\t\t\t\tthis.cart[index].number += num\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.cart.push({\r\n\t\t\t\t\t// \tid: good.id,\r\n\t\t\t\t\t// \tcate_id: cate.id,\r\n\t\t\t\t\t// \tname: good.name,\r\n\t\t\t\t\t// \tprice: good.price,\r\n\t\t\t\t\t// \tnumber: num,\r\n\t\t\t\t\t// \timage: good.images,\r\n\t\t\t\t\t// \tuse_property: good.use_property,\r\n\t\t\t\t\t// \tprops_text: good.props_text,\r\n\t\t\t\t\t// \tprops: good.props\r\n\t\t\t\t\t// })\r\n\r\n\t\t\t\t\tconst res = await this.$myRequet({\r\n\t\t\t\t\t\turl: '/shoppingCart/add',\r\n\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\tname: good.name,\r\n\t\t\t\t\t\t\timage: good.image,\r\n\t\t\t\t\t\t\tuserId: this.member.customerId,\r\n\t\t\t\t\t\t\tdishId: good.id,\r\n\r\n\t\t\t\t\t\t\tdishFlavor: good.props_text,\r\n\t\t\t\t\t\t\tnumber: num,\r\n\t\t\t\t\t\t\tamount: good.price\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// console.log(res.data)\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\r\n\t\t\t\t\t\tvar flag = 1;\r\n\t\t\t\t\t\tfor (var i = 0; i < this.cart.length; i++) {\r\n\t\t\t\t\t\t\tif ((this.cart[i].dishId == good.id) || (this.cart[i].setmealId == good.id)) {\r\n\t\t\t\t\t\t\t\tthis.cart[i].number = this.cart[i].number + 1;\r\n\t\t\t\t\t\t\t\tflag = 0;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (flag == 1) {\r\n\t\t\t\t\t\t\tthis.cart.push({\r\n\t\t\t\t\t\t \tname: good.name,\r\n\t\t\t\t\t\t\t\timage: good.image,\r\n\t\t\t\t\t\t\t\tuserId: this.member.customerId,\r\n\t\t\t\t\t\t\t\tdishId: good.id,\r\n\r\n\t\t\t\t\t\t\t\tdishFlavor: good.props_text,\r\n\t\t\t\t\t\t\t\tnumber: num,\r\n\t\t\t\t\t\t\t\tamount: good.price\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(\"success\")\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(this.cart)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleReduceFromCart(item, good) {\r\n\t\t\t\tconst index = this.cart.findIndex(item => item.id === good.id)\r\n\t\t\t\tthis.cart[index].number -= 1\r\n\t\t\t\tif (this.cart[index].number <= 0) {\r\n\t\t\t\t\tthis.cart.splice(index, 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshowGoodDetailModal(item, good) {\r\n\r\n\t\t\t\tthis.good = JSON.parse(JSON.stringify({\r\n\t\t\t\t\t...item,\r\n\t\t\t\t\tnumber: 1\r\n\t\t\t\t}))\r\n\t\t\t\t// console.log(\"初始化了good\")\r\n\t\t\t\t// console.log(this.good)\r\n\t\t\t\tfor (var i = 0; i < this.good.flavors.length; i++) {\r\n\t\t\t\t\tvar arr = JSON.parse(this.good.flavors[i].value)\r\n\r\n\t\t\t\t\tvar list = []\r\n\t\t\t\t\tvar values = []\r\n\t\t\t\t\tfor (var j = 0; j < arr.length; j++) {\r\n\t\t\t\t\t\tconst obj = {\r\n\t\t\t\t\t\t\tis_default: 0,\r\n\t\t\t\t\t\t\tvalue: arr[j]\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthis.obj = obj\r\n\t\t\t\t\t\tlist.push(this.obj)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.good.flavors[i].values = list\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// console.log(this.good.flavors)\r\n\r\n\t\t\t\tthis.category = JSON.parse(JSON.stringify(item))\r\n\t\t\t\tthis.goodDetailModalVisible = true\r\n\t\t\t},\r\n\t\t\tcloseGoodDetailModal() { //关闭饮品详情模态框\r\n\t\t\t\tthis.goodDetailModalVisible = false\r\n\t\t\t\tthis.category = {}\r\n\t\t\t\tthis.good = {}\r\n\t\t\t},\r\n\t\t\tchangePropertyDefault(index, key) { //改变默认属性值\r\n\t\t\t\tthis.good.flavors[index].values.forEach(value => this.$set(value, 'is_default', 0))\r\n\t\t\t\t// console.log(this.good)\r\n\t\t\t\t// console.log(good.property)\r\n\t\t\t\tthis.good.flavors[index].values[key].is_default = 1\r\n\t\t\t\tthis.good.number = 1\r\n\r\n\t\t\t\t// //             this.test=good\r\n\t\t\t\t// // for(var i =0;i<this.test.flavors.length;i++){\r\n\t\t\t\t// //  this.test.flavors[i].flag=value\r\n\t\t\t\t// //  console.log(this.test.flavors[i].flag)\r\n\t\t\t\t// // }\r\n\t\t\t\t// console.log(good)\r\n\t\t\t\t// this.test = JSON.parse(good.flavors[0].value)\r\n\t\t\t\t// console.log(this.test == value)\r\n\t\t\t\t// // item.dishFlavor=value\r\n\t\t\t\t// // console.log(item.dishFlavor==value)\r\n\t\t\t},\r\n\t\t\tgetGoodSelectedProps(good, type = 'text') { //计算当前饮品所选属性\r\n\t\t\t\tif (good.flavors) {\r\n\t\t\t\t\t// console.log(good.flavors)\r\n\t\t\t\t\tlet props = []\r\n\t\t\t\t\tgood.flavors.forEach(({\r\n\t\t\t\t\t\tvalues\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tvalues.forEach(value => {\r\n\t\t\t\t\t\t\tif (value.is_default) {\r\n\t\t\t\t\t\t\t\tprops.push(type === 'text' ? value.value : value.id)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn type === 'text' ? props.join('，') : props\r\n\t\t\t\t}\r\n\t\t\t\t// console.log(\"000000000000\")\r\n\t\t\t\treturn ''\r\n\t\t\t},\r\n\t\t\thandlePropertyAdd() {\r\n\t\t\t\tthis.good.number += 1\r\n\t\t\t},\r\n\t\t\thandlePropertyReduce() {\r\n\t\t\t\tif (this.good.number === 1) return\r\n\t\t\t\tthis.good.number -= 1\r\n\t\t\t},\r\n\t\t\thandleAddToCartInModal() {\r\n\t\t\t\tconst product = Object.assign({}, this.good, {\r\n\t\t\t\t\tprops_text: this.getGoodSelectedProps(this.good),\r\n\t\t\t\t\tprops: this.getGoodSelectedProps(this.good, 'id')\r\n\t\t\t\t})\r\n\r\n\t\t\t\tthis.handleAddToCart(this.category, product, this.good.number)\r\n\t\t\t\tthis.closeGoodDetailModal()\r\n\t\t\t},\r\n\t\t\topenCartPopup() { //打开/关闭购物车列表popup\r\n\t\t\t\tthis.cartPopupVisible = !this.cartPopupVisible\r\n\t\t\t},\r\n\t\t\thandleCartClear() { //清空购物车\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定清空购物车么',\r\n\t\t\t\t\tsuccess: ({\r\n\t\t\t\t\t\tconfirm\r\n\t\t\t\t\t}) => {\r\n\t\t\t\t\t\tif (confirm) {\r\n\r\n\t\t\t\t\t\t\tthis.cartPopupVisible = false\r\n\t\t\t\t\t\t\t// console.log(this.member.customerId)\r\n\t\t\t\t\t\t\tthis.$myRequet({\r\n\t\t\t\t\t\t\t\turl: '/shoppingCart/clean',\r\n\t\t\t\t\t\t\t\tmethod: 'DELETE',\r\n\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\tuserId: this.member.customerId\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthis.cart = []\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleCartItemAdd(index) {\r\n\t\t\t\tthis.cart[index].number += 1\r\n\t\t\t},\r\n\t\t\thandleCartItemReduce(index) {\r\n\t\t\t\tif (this.cart[index].number === 1) {\r\n\t\t\t\t\tthis.cart.splice(index, 1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.cart[index].number -= 1\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.cart.length) {\r\n\t\t\t\t\tthis.cartPopupVisible = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttoPay() {\r\n\t\t\t\tif (!this.isLogin) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '加载中'\r\n\t\t\t\t})\r\n\t\t\t\tuni.setStorageSync('cart', JSON.parse(JSON.stringify(this.cart)))\r\n\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/pay/pay'\r\n\t\t\t\t})\r\n\t\t\t\tuni.hideLoading()\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t@import '~@/pages/menu/menu.scss';\r\n</style>\n","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./menu.vue?vue&type=style&index=0&id=368aef34&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./menu.vue?vue&type=style&index=0&id=368aef34&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1681034279355\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}